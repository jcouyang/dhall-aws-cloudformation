<!DOCTYPE HTML><html><head><title>/examples/dynamo.dhall</title><link href="../index.css" type="text/css" rel="stylesheet"><link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600;700&amp;family=Lato:ital,wght@0,400;0,700;1,400&amp;display=swap" type="text/css" rel="stylesheet"><script src="../index.js" type="text/javascript"></script><meta charset="UTF-8"></head><body><div class="nav-bar"><img src="../dhall-icon.svg" class="dhall-icon"><p class="package-title">dhall-aws-cloudformation</p><div class="nav-bar-content-divider"></div><a id="switch-light-dark-mode" class="nav-option">Switch Light/Dark Mode</a></div><div class="main-container"><h2 class="doc-title"><span class="crumb-divider">/</span><a href="../index.html">dhall-aws-cloudformation</a><span class="crumb-divider">/</span><a href="index.html" class="title-crumb">examples</a><span class="crumb-divider">/</span><span href="index.html" class="title-crumb">dynamo.dhall</span></h2><a data-path="https://raw.githubusercontent.com/jcouyang/dhall-aws-cloudformation/0.7.57/examples/dynamo.dhall" class="copy-to-clipboard"><i><small>Copy path to clipboard</small></i></a><br><div class="doc-contents"></div><h3>Source</h3><div class="source-code"><pre>let <span data-name="var1-5" id="var1-5" class="name-decl">cf</span> = <a href="../cloudformation/package.dhall.html">../cloudformation/package.dhall</a><br><br>let <span data-name="var3-5" id="var3-5" class="name-decl">Table</span> = <a href="#var1-5" data-name="var1-5" class="name-use">cf</a>.`AWS::DynamoDB::Table`<br><br>let <span data-name="var5-5" id="var5-5" class="name-decl">Role</span> = <a href="#var1-5" data-name="var1-5" class="name-use">cf</a>.`AWS::IAM::Role`<br><br>let <span data-name="var7-5" id="var7-5" class="name-decl">SPolicy</span> = <a href="#var1-5" data-name="var1-5" class="name-use">cf</a>.`AWS::ApplicationAutoScaling::ScalingPolicy`<br><br>let <span data-name="var9-5" id="var9-5" class="name-decl">ScalableTarget</span> = <a href="#var1-5" data-name="var1-5" class="name-use">cf</a>.`AWS::ApplicationAutoScaling::ScalableTarget`<br><br>let <span data-name="var11-5" id="var11-5" class="name-decl">Fn</span> = <a href="../Fn.dhall.html">../Fn.dhall</a><br><br>let <span data-name="var13-5" id="var13-5" class="name-decl">fn</span> = <a href="#var11-5" data-name="var11-5" class="name-use">Fn</a>.render<br><br>let <span data-name="var15-5" id="var15-5" class="name-decl">JSON</span> =<br>      <a href="https://raw.githubusercontent.com/dhall-lang/dhall-lang/v20.0.0/Prelude/JSON/core.dhall" target="_blank">https://raw.githubusercontent.com/dhall-lang/dhall-lang/v20.0.0/Prelude/JSON/core.dhall</a><br><br>let <span data-name="var18-5" id="var18-5" class="name-decl">s</span> = <a href="#var11-5" data-name="var11-5" class="name-use">Fn</a>.renderText<br><br>let <span data-name="var20-5" id="var20-5" class="name-decl">DeletePolicy</span> = <a href="../DeletionPolicy.dhall.html">../DeletionPolicy.dhall</a><br><br>let <span data-name="var22-5" id="var22-5" class="name-decl">policyTamplate</span> = <a href="../sam/policy-template/package.dhall.html">../sam/policy-template/package.dhall</a><br><br>in  { Resources =<br>      { DDBTable = <a href="#var3-5" data-name="var3-5" class="name-use">Table</a>.Resources::{<br>        , DeletionPolicy = Some <a href="#var20-5" data-name="var20-5" class="name-use">DeletePolicy</a>.Retain<br>        , Properties = <a href="#var3-5" data-name="var3-5" class="name-use">Table</a>.Properties::{<br>          , AttributeDefinitions = Some<br>            [ { AttributeName = <a href="#var18-5" data-name="var18-5" class="name-use">s</a> &quot;ArtistId&quot;, AttributeType = <a href="#var18-5" data-name="var18-5" class="name-use">s</a> &quot;S&quot; }<br>            , { AttributeName = <a href="#var18-5" data-name="var18-5" class="name-use">s</a> &quot;Concert&quot;, AttributeType = <a href="#var18-5" data-name="var18-5" class="name-use">s</a> &quot;S&quot; }<br>            , { AttributeName = <a href="#var18-5" data-name="var18-5" class="name-use">s</a> &quot;TicketSales&quot;, AttributeType = <a href="#var18-5" data-name="var18-5" class="name-use">s</a> &quot;S&quot; }<br>            ]<br>          , GlobalSecondaryIndexes = Some<br>            [ <a href="#var3-5" data-name="var3-5" class="name-use">Table</a>.GlobalSecondaryIndex::{<br>              , IndexName = <a href="#var18-5" data-name="var18-5" class="name-use">s</a> &quot;GSI&quot;<br>              , KeySchema =<br>                [ { AttributeName = <a href="#var18-5" data-name="var18-5" class="name-use">s</a> &quot;TicketSales&quot;, KeyType = <a href="#var18-5" data-name="var18-5" class="name-use">s</a> &quot;HASH&quot; } ]<br>              , Projection = <a href="#var3-5" data-name="var3-5" class="name-use">Table</a>.Projection::{<br>                , ProjectionType = Some (<a href="#var18-5" data-name="var18-5" class="name-use">s</a> &quot;KEYS_ONLY&quot;)<br>                }<br>              , ProvisionedThroughput = Some<br>                { ReadCapacityUnits = 5, WriteCapacityUnits = 5 }<br>              }<br>            ]<br>          , KeySchema =<br>            [ { AttributeName = <a href="#var18-5" data-name="var18-5" class="name-use">s</a> &quot;ArtistId&quot;, KeyType = <a href="#var18-5" data-name="var18-5" class="name-use">s</a> &quot;HASH&quot; }<br>            , { AttributeName = <a href="#var18-5" data-name="var18-5" class="name-use">s</a> &quot;Concert&quot;, KeyType = <a href="#var18-5" data-name="var18-5" class="name-use">s</a> &quot;RANGE&quot; }<br>            ]<br>          , ProvisionedThroughput = Some<br>            { ReadCapacityUnits = 5, WriteCapacityUnits = 5 }<br>          }<br>        }<br>      , ScalingRole = <a href="#var5-5" data-name="var5-5" class="name-use">Role</a>.Resources::{<br>        , Properties = <a href="#var5-5" data-name="var5-5" class="name-use">Role</a>.Properties::{<br>          , AssumeRolePolicyDocument =<br>              <a href="#var15-5" data-name="var15-5" class="name-use">JSON</a>.object<br>                ( toMap<br>                    { Statement =<br>                        <a href="#var15-5" data-name="var15-5" class="name-use">JSON</a>.array<br>                          [ <a href="#var15-5" data-name="var15-5" class="name-use">JSON</a>.object<br>                              ( toMap<br>                                  { Action =<br>                                      <a href="#var15-5" data-name="var15-5" class="name-use">JSON</a>.array<br>                                        [ <a href="#var15-5" data-name="var15-5" class="name-use">JSON</a>.string &quot;sts:AssumeRole&quot; ]<br>                                  , Effect = <a href="#var15-5" data-name="var15-5" class="name-use">JSON</a>.string &quot;Allow&quot;<br>                                  , Principal =<br>                                      <a href="#var15-5" data-name="var15-5" class="name-use">JSON</a>.object<br>                                        ( toMap<br>                                            { Service =<br>                                                <a href="#var15-5" data-name="var15-5" class="name-use">JSON</a>.array<br>                                                  [ <a href="#var15-5" data-name="var15-5" class="name-use">JSON</a>.string<br>                                                      &quot;application-autoscaling.amazonaws.com&quot;<br>                                                  ]<br>                                            }<br>                                        )<br>                                  }<br>                              )<br>                          ]<br>                    , Version = <a href="#var15-5" data-name="var15-5" class="name-use">JSON</a>.string &quot;2012-10-17&quot;<br>                    }<br>                )<br>          , Path = Some (<a href="#var18-5" data-name="var18-5" class="name-use">s</a> &quot;/&quot;)<br>          , Policies = Some<br>            [ <a href="#var5-5" data-name="var5-5" class="name-use">Role</a>.Policy::{<br>              , PolicyDocument =<br>                  <a href="#var22-5" data-name="var22-5" class="name-use">policyTamplate</a>.DynamoDBReadPolicy (<a href="#var11-5" data-name="var11-5" class="name-use">Fn</a>.String &quot;Name&quot;)<br>              , PolicyName = <a href="#var18-5" data-name="var18-5" class="name-use">s</a> &quot;root&quot;<br>              }<br>            ]<br>          }<br>        }<br>      , WriteCapacityScalableTarget = <a href="#var9-5" data-name="var9-5" class="name-use">ScalableTarget</a>.Resources::{<br>        , Properties = <a href="#var9-5" data-name="var9-5" class="name-use">ScalableTarget</a>.Properties::{<br>          , MaxCapacity = +15<br>          , MinCapacity = +5<br>          , ResourceId =<br>              <a href="#var13-5" data-name="var13-5" class="name-use">fn</a><br>                ( <a href="#var11-5" data-name="var11-5" class="name-use">Fn</a>.Join<br>                    &quot;/&quot;<br>                    [ <a href="#var11-5" data-name="var11-5" class="name-use">Fn</a>.String &quot;table&quot;, <a href="#var11-5" data-name="var11-5" class="name-use">Fn</a>.Ref (<a href="#var11-5" data-name="var11-5" class="name-use">Fn</a>.String &quot;DDBTable&quot;) ]<br>                )<br>          , RoleARN = <a href="#var13-5" data-name="var13-5" class="name-use">fn</a> (<a href="#var11-5" data-name="var11-5" class="name-use">Fn</a>.GetAtt &quot;ScalingRole.Arn&quot;)<br>          , ScalableDimension = <a href="#var18-5" data-name="var18-5" class="name-use">s</a> &quot;dynamodb:table:WriteCapacityUnits&quot;<br>          , ServiceNamespace = <a href="#var18-5" data-name="var18-5" class="name-use">s</a> &quot;dynamodb&quot;<br>          }<br>        }<br>      , WriteScalingPolicy = <a href="#var7-5" data-name="var7-5" class="name-use">SPolicy</a>.Resources::{<br>        , Properties = <a href="#var7-5" data-name="var7-5" class="name-use">SPolicy</a>.Properties::{<br>          , PolicyName = <a href="#var18-5" data-name="var18-5" class="name-use">s</a> &quot;WriteAutoScalingPolicy&quot;<br>          , PolicyType = <a href="#var18-5" data-name="var18-5" class="name-use">s</a> &quot;TargetTrackingScaling&quot;<br>          , ScalingTargetId = Some<br>              (<a href="#var13-5" data-name="var13-5" class="name-use">fn</a> (<a href="#var11-5" data-name="var11-5" class="name-use">Fn</a>.Ref (<a href="#var11-5" data-name="var11-5" class="name-use">Fn</a>.String &quot;WriteCapacityScalableTarget&quot;)))<br>          , TargetTrackingScalingPolicyConfiguration = Some <a href="#var7-5" data-name="var7-5" class="name-use">SPolicy</a>.TargetTrackingScalingPolicyConfiguration::{<br>            , PredefinedMetricSpecification = Some <a href="#var7-5" data-name="var7-5" class="name-use">SPolicy</a>.PredefinedMetricSpecification::{<br>              , PredefinedMetricType = <a href="#var18-5" data-name="var18-5" class="name-use">s</a> &quot;DynamoDBWriteCapacityUtilization&quot;<br>              }<br>            , ScaleInCooldown = Some +60<br>            , ScaleOutCooldown = Some +60<br>            , TargetValue = 50.0<br>            }<br>          }<br>        }<br>      }<br>    }<br></pre></div></div></body></html>